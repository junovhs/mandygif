<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Disposable Night</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="toolbar">
    <div class="toolbar-section">
      <label class="toolbar-file-btn">
        <input id="file" type="file" accept="image/*,video/*" style="display:none" />
        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 2v12M2 8h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        Open File
      </label>
      <div class="toolbar-dropdown">
        <button class="toolbar-dropdown-btn">
          <span>Preset</span>
          <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor" style="stroke:currentColor; stroke-width:1.5; fill:none"><path d="M3 5l3 3 3-3"/></svg>
        </button>
      </div>
    </div>
    <div class="toolbar-section">
      <button id="original" class="toolbar-toggle-btn" title="Toggle Original (A|B)">A | B</button>
      <div class="separator"></div>
      <button id="view-mode" class="toolbar-btn">1:1</button>
      <div class="separator"></div>
      <button id="reset" class="toolbar-btn">Reset</button>
    </div>
    <div class="toolbar-section">
      <!-- MODIFIED BUTTON TEXT -->
      <button id="export-btn" class="toolbar-btn toolbar-btn-primary">Export Image</button>
    </div>
  </div>

  <div id="viewer">
    <div id="player-wrapper">
      <canvas id="gl"></canvas>
      <div id="transport-bar" class="hidden">
        <input type="range" id="timeline" min="0" max="100" value="0" step="0.1" />
        <div class="transport-controls-row">
            <span id="current-time" class="time-stat">0:00</span>
            <div class="transport-controls">
                <button id="prev-frame" class="transport-btn small" aria-label="Previous Frame">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M4 3v10L10 8z M11 3v10h2V3h-2z" transform="scale(-1, 1) translate(-16, 0)"/></svg>
                </button>
                <button id="transport-play" class="transport-btn" aria-label="Play/Pause">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M4 3v10l9-5z" id="play-icon"/>
                    <g id="pause-icon" style="display:none"><rect x="4" y="3" width="3" height="10"/><rect x="9" y="3" width="3" height="10"/></g>
                    </svg>
                </button>
                <button id="next-frame" class="transport-btn small" aria-label="Next Frame">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M4 3v10L10 8z M11 3v10h2V3h-2z"/></svg>
                </button>
            </div>
            <span id="duration-time" class="time-stat">0:00</span>
        </div>
      </div>
    </div>
  </div>

  <div id="controls">
    <nav class="tabs" id="tab-nav"></nav>
    <div class="tab-content" id="tab-content"></div>
  </div>

  <video id="vid" playsinline muted style="display:none"></video>
  <div id="overlay" class="overlay hidden"><div id="overlayText">Processingâ€¦</div></div>
  <div id="toast" class="toast hidden"></div>

  <script src="https://cdn.jsdelivr.net/npm/@ffmpeg/ffmpeg@0.12.6/dist/umd/ffmpeg.min.js"></script>
  <script type="module" src="app.js"></script>
</body>
</html>